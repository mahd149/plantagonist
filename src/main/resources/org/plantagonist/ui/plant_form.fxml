<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.plantagonist.ui.PlantFormController"
            prefWidth="560" prefHeight="680"
            styleClass="app-root">

    <!-- Main container with card styling -->
    <center>
        <VBox spacing="0" styleClass="card" style="-fx-max-width: 520px; -fx-alignment: center;">

            <!-- Header Section -->
            <VBox spacing="8" styleClass="pad-16" style="-fx-padding: 20 24 16 24;">
                <Label fx:id="title" text="Add Plant" styleClass="h2"/>
                <Label text="Keep details concise. You can edit anytime." styleClass="subtle"/>
                <Separator styleClass="separator" style="-fx-background-color: -color-stroke; -fx-pref-height: 1;"/>
            </VBox>

            <!-- Form Content -->
            <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-border-color: transparent;">
                <content>
                    <VBox spacing="20" styleClass="pad-16" style="-fx-padding: 0 24 20 24;">

                        <!-- Name Field -->
                        <VBox spacing="8">
                            <HBox spacing="4" alignment="CENTER_LEFT">
                                <Label text="PLANT NAME" styleClass="kicker"/>
                                <Label text="*" style="-fx-text-fill: #ff6b6b; -fx-font-weight: bold;"/>
                            </HBox>
                            <TextField fx:id="nameField"
                                       promptText="e.g., Monstera Deliciosa"
                                       style="-fx-font-size: 14px; -fx-pref-height: 42px;"/>
                            <Label text="Give your plant a memorable name" styleClass="subtle"/>
                        </VBox>

                        <!-- Species Field -->
                        <VBox spacing="8">
                            <Label text="SPECIES" styleClass="kicker"/>
                            <TextField fx:id="speciesField"
                                       promptText="e.g., Monstera deliciosa"
                                       style="-fx-font-size: 14px; -fx-pref-height: 42px;"/>
                            <Label text="Scientific name helps with care suggestions" styleClass="subtle"/>
                        </VBox>

                        <!-- Care Requirements Row -->
                        <VBox spacing="12">
                            <Label text="CARE REQUIREMENTS" styleClass="kicker"/>
                            <HBox spacing="16">
                                <!-- Water Frequency -->
                                <VBox spacing="8" HBox.hgrow="ALWAYS">
                                    <Label text="Water every (days)" style="-fx-text-fill: -color-text; -fx-font-size: 12px; -fx-font-weight: 600;"/>
                                    <TextField fx:id="waterEveryField"
                                               promptText="7"
                                               style="-fx-font-size: 14px; -fx-pref-height: 42px;"/>
                                </VBox>

                                <!-- Sunlight Hours -->
                                <VBox spacing="8" HBox.hgrow="ALWAYS">
                                    <Label text="Sunlight (hrs/day)" style="-fx-text-fill: -color-text; -fx-font-size: 12px; -fx-font-weight: 600;"/>
                                    <TextField fx:id="sunlightField"
                                               promptText="6.0"
                                               style="-fx-font-size: 14px; -fx-pref-height: 42px;"/>
                                </VBox>
                            </HBox>
                            <Label text="Leave blank if unsure â€¢ You can update these later" styleClass="subtle"/>
                        </VBox>

                        <!-- Last Watered -->
                        <VBox spacing="8">
                            <Label text="LAST WATERED" styleClass="kicker"/>
                            <DatePicker fx:id="lastWateredPicker"
                                        promptText="Select date"
                                        style="-fx-font-size: 14px; -fx-pref-height: 42px;"/>
                            <Label text="Used to calculate next watering reminder" styleClass="subtle"/>
                        </VBox>

                        <!-- Photo Section -->
                        <VBox spacing="12">
                            <Label text="PHOTO" styleClass="kicker"/>

                            <!-- Photo Input Area -->
                            <VBox spacing="8" styleClass="card"
                                  style="-fx-background-color: -color-surface; -fx-border-color: -color-stroke; -fx-border-style: dashed; -fx-border-width: 2; -fx-padding: 16;">
                                <HBox spacing="8" alignment="CENTER">
                                    <TextField fx:id="photoField"
                                               promptText="Drag and drop image here, or browse..."
                                               HBox.hgrow="ALWAYS"
                                               style="-fx-font-size: 13px; -fx-pref-height: 36px;"/>
                                    <Button text="Browse" onAction="#browsePhoto"
                                            styleClass="nav-btn"
                                            style="-fx-font-weight: 600; -fx-pref-height: 36px; -fx-padding: 0 16;"/>
                                </HBox>

                                <!-- Photo Preview Area -->
                                <HBox spacing="16" alignment="TOP_LEFT">
                                    <VBox alignment="CENTER" spacing="8"
                                          style="-fx-min-width: 160; -fx-min-height: 120; -fx-max-width: 160; -fx-max-height: 120; -fx-background-color: -color-elev-1; -fx-background-radius: 12px; -fx-border-radius: 12px; -fx-border-color: -color-stroke; -fx-border-width: 1;">
                                        <ImageView fx:id="photoPreview"
                                                   fitWidth="148" fitHeight="108"
                                                   preserveRatio="true" smooth="true"
                                                   style="-fx-background-radius: 10px;"/>
                                        <Label text="Preview" styleClass="subtle"
                                               style="-fx-font-size: 11px;"/>
                                    </VBox>

                                    <VBox spacing="6" alignment="TOP_LEFT">
                                        <Label text="ðŸ’¡ Tips for great plant photos:"
                                               style="-fx-text-fill: -color-text; -fx-font-size: 13px; -fx-font-weight: 600;"/>
                                        <Label text="â€¢ Use natural lighting when possible" styleClass="subtle"/>
                                        <Label text="â€¢ Capture the whole plant from the front" styleClass="subtle"/>
                                        <Label text="â€¢ Keep the background simple and clean" styleClass="subtle"/>
                                        <Label text="â€¢ Supported formats: PNG, JPG, GIF, WEBP" styleClass="subtle"/>
                                    </VBox>
                                </HBox>
                            </VBox>
                        </VBox>

                        <!-- Error Display -->
                        <HBox spacing="8" alignment="CENTER_LEFT"
                              style="-fx-background-color: rgba(255, 107, 107, 0.1); -fx-background-radius: 8px; -fx-padding: 12; -fx-border-color: rgba(255, 107, 107, 0.3); -fx-border-width: 1; -fx-border-radius: 8px;"
                              managed="false" visible="false" fx:id="errorContainer">
                            <Label text="âš " style="-fx-text-fill: #ff6b6b; -fx-font-size: 14px;"/>
                            <Label fx:id="errorLabel"
                                   style="-fx-text-fill: #ff9999; -fx-font-size: 13px;"
                                   wrapText="true" HBox.hgrow="ALWAYS"/>
                        </HBox>

                    </VBox>
                </content>
            </ScrollPane>

            <!-- Footer Actions -->
            <HBox spacing="12" alignment="CENTER_RIGHT"
                  styleClass="pad-16"
                  style="-fx-padding: 16 24 24 24; -fx-border-color: -color-stroke transparent transparent transparent; -fx-border-width: 1 0 0 0;">
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="Cancel" onAction="#cancel"
                        styleClass="nav-btn"
                        style="-fx-pref-height: 40px; -fx-padding: 0 20; -fx-font-size: 13px;"/>
                <Button text="Save Plant" onAction="#save"
                        styleClass="accent-btn pill"
                        style="-fx-pref-height: 40px; -fx-padding: 0 24; -fx-font-size: 13px; -fx-font-weight: 600;"/>
            </HBox>

        </VBox>
    </center>

</BorderPane>