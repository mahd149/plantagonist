<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.plantagonist.ui.CareLogController" stylesheets="@../css/styles.css">

    <top>
        <!-- Random plant fact display -->
        <VBox style="-fx-background-color: linear-gradient(to right, #1A4D2E, #23633C); -fx-padding: 15; -fx-background-radius: 18 18 0 0;">
            <HBox alignment="CENTER" spacing="10">
                <Label text="ðŸŒ¿" style="-fx-font-size: 24px;"/>
                <Label fx:id="plantFactLabel" wrapText="true" style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                <Button text="ðŸ”„" onAction="#refreshData" style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-background-radius: 50%; -fx-min-width: 30; -fx-min-height: 30;"/>
            </HBox>
        </VBox>
    </top>

    <center>
        <TabPane fx:id="careLogTabPane" tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: transparent;">

            <Tab text="Today's Tasks" style="-fx-font-weight: bold;">
                <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: -color-bg;">
                    <!-- Quick action buttons -->
                    <HBox spacing="10" alignment="CENTER">
                        <Button text="ðŸ’§ Watering" onAction="#logWatering" styleClass="accent-btn" style="-fx-font-size: 14px; -fx-padding: 10 20;"/>
                        <Button text="ðŸŒ¿ Fertilizing" onAction="#logFertilizing" styleClass="accent-btn" style="-fx-font-size: 14px; -fx-padding: 10 20;"/>
                        <Button text="ðŸ”„ Soil Change" onAction="#logSoilChange" styleClass="accent-btn" style="-fx-font-size: 14px; -fx-padding: 10 20;"/>
                    </HBox>

                    <!-- Today's tasks table -->
                    <Label text="Today's Care Tasks" styleClass="h2"/>
                    <TableView fx:id="todayTasksTable" styleClass="card" style="-fx-background-color: -color-elev-1; -fx-pref-height: 300;">
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </Tab>

            <Tab text="Upcoming Tasks" style="-fx-font-weight: bold;">
                <VBox style="-fx-padding: 20; -fx-background-color: -color-bg;">
                    <Label text="Upcoming Care Tasks (Next 7 Days)" styleClass="h2"/>
                    <TableView fx:id="upcomingTasksTable" styleClass="card" style="-fx-background-color: -color-elev-1; -fx-pref-height: 400;">
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </Tab>

            <Tab text="Care History" style="-fx-font-weight: bold;">
                <VBox style="-fx-padding: 20; -fx-background-color: -color-bg;">
                    <Label text="Recent Care Activities" styleClass="h2"/>
                    <TableView fx:id="careHistoryTable" styleClass="card" style="-fx-background-color: -color-elev-1; -fx-pref-height: 400;">
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </Tab>

        </TabPane>
    </center>

    <bottom>
        <!-- Notification section -->
        <VBox fx:id="notificationContainer" styleClass="card" style="-fx-background-color: #2A1E1E; -fx-border-color: #FF6B6B; -fx-margin: 10; -fx-padding: 15;">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="ðŸ””" style="-fx-font-size: 18px;"/>
                <Label text="Today's Reminders" style="-fx-text-fill: #FF6B6B; -fx-font-weight: bold; -fx-font-size: 14px;"/>
            </HBox>
            <ListView fx:id="notificationsList" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-pref-height: 80;"/>
        </VBox>
    </bottom>

</BorderPane>